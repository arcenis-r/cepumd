<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cepumd">
<title>Accounting for Inconsistent Code Definitions in CE PUMD • cepumd</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accounting for Inconsistent Code Definitions in CE PUMD">
<meta property="og:description" content="cepumd">
<meta property="og:image" content="https://arcenis-r.github.io/cepumd/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cepumd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/simple-cepumd-workflow.html">Simple cepumd Workflow</a>
    <a class="dropdown-item" href="../articles/ce-estimates-by-demographics.html">CE Estimates by Demographic Category</a>
    <a class="dropdown-item" href="../articles/inflation-adjusted-estimates.html">Calcluating Inflation-Adjusted CE Estimates</a>
    <a class="dropdown-item" href="../articles/inconsistent-code-definitions.html">Accounting for Inconsistent Code Definitions in CE PUMD</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://linkedin.com/in/arcenisrojas" aria-label="LinkedIn">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/arcenis-r/cepumd/" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Accounting for Inconsistent Code Definitions in CE PUMD</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/arcenis-r/cepumd/blob/HEAD/vignettes/articles/inconsistent-code-definitions.Rmd" class="external-link"><code>vignettes/articles/inconsistent-code-definitions.Rmd</code></a></small>
      <div class="d-none name"><code>inconsistent-code-definitions.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://arcenis-r.github.io/cepumd/">cepumd</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this workflow I’m going to calculate estimated mean utilities
expenditures for 2015 using integrated data by CU composition using the
FAM_TYPE variable. In this case I’m going to start by looking at the
codes for that variable to show how one might run into an inconsistency
in code definitions across survey instruments.</p>
<p>I’ll need the following data and metadata sources:</p>
<ul>
<li>Interview survey data zip files for 2015</li>
<li>Diary survey data zip files for 2015</li>
<li>Hierarchical grouping zip files</li>
<li>CE Data Dictionary</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-gathering">Data gathering<a class="anchor" aria-label="anchor" href="#data-gathering"></a>
</h2>
<p>Data files can be downloaded from the <a href="https://www.bls.gov/cex/pumd_data.htm#csv" class="external-link">CE PUMD Data Files
page</a> (it’s easiest to use CSV) and hierarchical grouping files can
be downloaded from the <a href="https://www.bls.gov/cex/pumd_doc.htm" class="external-link">CE
PUMD Documentation page</a></p>
<p>To get the files I’ll first create a temporary directory and download
all of the files that I need from the BLS website into this directory.
You might choose to store your files differently, but this convention
will keep the files organized, it will keep the code simple, and
everything will be in a folder that will be easy to clean up after.
Since the BLS blocks third party applications I’ll add a user-agent to
identify myself in the download function that is stored in a variable
called <code>cepumd_ua</code> (not shown).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ce_data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://www.bls.gov/cex/pumd/data/comma/intrvw15.zip"</span>,</span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"intrvw15.zip"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"User-Agent"</span> <span class="op">=</span> <span class="va">cepumd_ua</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://www.bls.gov/cex/pumd/data/comma/diary15.zip"</span>,</span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"diary15.zip"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"User-Agent"</span> <span class="op">=</span> <span class="va">cepumd_ua</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://www.bls.gov/cex/pumd/stubs.zip"</span>,</span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"stubs.zip"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"User-Agent"</span> <span class="op">=</span> <span class="va">cepumd_ua</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://www.bls.gov/cex/pumd/ce-pumd-interview-diary-dictionary.xlsx"</span>,</span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"ce-data-dict.xlsx"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"User-Agent"</span> <span class="op">=</span> <span class="va">cepumd_ua</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exploring-grouping-variable-code-definitions">Exploring grouping variable code definitions<a class="anchor" aria-label="anchor" href="#exploring-grouping-variable-code-definitions"></a>
</h2>
<p>First, I’ll load the “Codes” worksheet from the CE Data Dictionary,
which can be downloaded from the <a href="https://www.bls.gov/cex/pumd_doc.htm" class="external-link">CE PUMD Documentation
page</a>. Then I’ll look at code descriptions for the “FAM_TYPE”
variable in the dictionary and I’m going to focus on the code values of
3, 5, and 7.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ce_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"ce-data-dict.xlsx"</span><span class="op">)</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"Codes "</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ce_codes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">variable</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"FAM_TYPE"</span>,</span>
<span>  <span class="va">first_year</span> <span class="op">&lt;=</span> <span class="fl">2015</span>,</span>
<span>  <span class="op">(</span><span class="va">last_year</span> <span class="op">&gt;=</span> <span class="fl">2015</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">last_year</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">code_value</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"5"</span>, <span class="st">"7"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">survey</span>, <span class="va">code_value</span>, <span class="va">code_description</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">code_value</span>, <span class="va">survey</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="zcrsdtcjgq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zcrsdtcjgq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zcrsdtcjgq thead, #zcrsdtcjgq tbody, #zcrsdtcjgq tfoot, #zcrsdtcjgq tr, #zcrsdtcjgq td, #zcrsdtcjgq th {
  border-style: none;
}

#zcrsdtcjgq p {
  margin: 0;
  padding: 0;
}

#zcrsdtcjgq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zcrsdtcjgq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zcrsdtcjgq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zcrsdtcjgq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zcrsdtcjgq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcrsdtcjgq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcrsdtcjgq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcrsdtcjgq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zcrsdtcjgq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zcrsdtcjgq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zcrsdtcjgq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zcrsdtcjgq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zcrsdtcjgq .gt_spanner_row {
  border-bottom-style: hidden;
}

#zcrsdtcjgq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zcrsdtcjgq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zcrsdtcjgq .gt_from_md > :first-child {
  margin-top: 0;
}

#zcrsdtcjgq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zcrsdtcjgq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zcrsdtcjgq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zcrsdtcjgq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zcrsdtcjgq .gt_row_group_first td {
  border-top-width: 2px;
}

#zcrsdtcjgq .gt_row_group_first th {
  border-top-width: 2px;
}

#zcrsdtcjgq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcrsdtcjgq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zcrsdtcjgq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zcrsdtcjgq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcrsdtcjgq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcrsdtcjgq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zcrsdtcjgq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zcrsdtcjgq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zcrsdtcjgq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcrsdtcjgq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcrsdtcjgq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcrsdtcjgq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcrsdtcjgq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcrsdtcjgq .gt_left {
  text-align: left;
}

#zcrsdtcjgq .gt_center {
  text-align: center;
}

#zcrsdtcjgq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zcrsdtcjgq .gt_font_normal {
  font-weight: normal;
}

#zcrsdtcjgq .gt_font_bold {
  font-weight: bold;
}

#zcrsdtcjgq .gt_font_italic {
  font-style: italic;
}

#zcrsdtcjgq .gt_super {
  font-size: 65%;
}

#zcrsdtcjgq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zcrsdtcjgq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zcrsdtcjgq .gt_indent_1 {
  text-indent: 5px;
}

#zcrsdtcjgq .gt_indent_2 {
  text-indent: 10px;
}

#zcrsdtcjgq .gt_indent_3 {
  text-indent: 15px;
}

#zcrsdtcjgq .gt_indent_4 {
  text-indent: 20px;
}

#zcrsdtcjgq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="survey">survey</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="code_value">code_value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="code_description">code_description</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">3</td>
<td headers="code_description" class="gt_row gt_left">Married couple, own children only,  oldest child &gt; 6, &lt; 18</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">3</td>
<td headers="code_description" class="gt_row gt_left">Married Couple, own children only oldest child &gt;= 6, &lt;= 17</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">5</td>
<td headers="code_description" class="gt_row gt_left">All other Married couple families</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">5</td>
<td headers="code_description" class="gt_row gt_left">All other Husband and wife families</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">7</td>
<td headers="code_description" class="gt_row gt_left">One parent, female, own children, at least one age &lt; 18</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">7</td>
<td headers="code_description" class="gt_row gt_left">One parent, female, own children, at least one age &lt; 18</td>
</tr>
</tbody>
</table>
</div>
<p>The code descriptions for these 3 code values are different across
instruments. To resolve this I’m going to create a table containing only
codes from the Interview survey.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fam_type_codes</span> <span class="op">&lt;-</span> <span class="va">ce_codes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">variable</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"FAM_TYPE"</span>,</span>
<span>    <span class="va">first_year</span> <span class="op">&lt;=</span> <span class="fl">2015</span>,</span>
<span>    <span class="op">(</span><span class="va">last_year</span> <span class="op">&gt;=</span> <span class="fl">2015</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">last_year</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">codes2keep</span> <span class="op">&lt;-</span> <span class="va">fam_type_codes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">survey</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"INTERVIEW"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">code_value</span>, <span class="va">code_description</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fam_type_codes</span> <span class="op">&lt;-</span> <span class="va">fam_type_codes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">code_description</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">codes2keep</span>, by <span class="op">=</span> <span class="st">"code_value"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">code_description</span>, .after <span class="op">=</span> <span class="va">code_value</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fam_type_codes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">code_value</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3"</span>, <span class="st">"5"</span>, <span class="st">"7"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">survey</span>, <span class="va">code_value</span>, <span class="va">code_description</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">code_value</span>, <span class="va">survey</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="ecxmbnknsh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ecxmbnknsh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ecxmbnknsh thead, #ecxmbnknsh tbody, #ecxmbnknsh tfoot, #ecxmbnknsh tr, #ecxmbnknsh td, #ecxmbnknsh th {
  border-style: none;
}

#ecxmbnknsh p {
  margin: 0;
  padding: 0;
}

#ecxmbnknsh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ecxmbnknsh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ecxmbnknsh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ecxmbnknsh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ecxmbnknsh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ecxmbnknsh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ecxmbnknsh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ecxmbnknsh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ecxmbnknsh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ecxmbnknsh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ecxmbnknsh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ecxmbnknsh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ecxmbnknsh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ecxmbnknsh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ecxmbnknsh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ecxmbnknsh .gt_from_md > :first-child {
  margin-top: 0;
}

#ecxmbnknsh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ecxmbnknsh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ecxmbnknsh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ecxmbnknsh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ecxmbnknsh .gt_row_group_first td {
  border-top-width: 2px;
}

#ecxmbnknsh .gt_row_group_first th {
  border-top-width: 2px;
}

#ecxmbnknsh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ecxmbnknsh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ecxmbnknsh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ecxmbnknsh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ecxmbnknsh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ecxmbnknsh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ecxmbnknsh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ecxmbnknsh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ecxmbnknsh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ecxmbnknsh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ecxmbnknsh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ecxmbnknsh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ecxmbnknsh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ecxmbnknsh .gt_left {
  text-align: left;
}

#ecxmbnknsh .gt_center {
  text-align: center;
}

#ecxmbnknsh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ecxmbnknsh .gt_font_normal {
  font-weight: normal;
}

#ecxmbnknsh .gt_font_bold {
  font-weight: bold;
}

#ecxmbnknsh .gt_font_italic {
  font-style: italic;
}

#ecxmbnknsh .gt_super {
  font-size: 65%;
}

#ecxmbnknsh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ecxmbnknsh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ecxmbnknsh .gt_indent_1 {
  text-indent: 5px;
}

#ecxmbnknsh .gt_indent_2 {
  text-indent: 10px;
}

#ecxmbnknsh .gt_indent_3 {
  text-indent: 15px;
}

#ecxmbnknsh .gt_indent_4 {
  text-indent: 20px;
}

#ecxmbnknsh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="survey">survey</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="code_value">code_value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="code_description">code_description</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">3</td>
<td headers="code_description" class="gt_row gt_left">Married Couple, own children only oldest child &gt;= 6, &lt;= 17</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">3</td>
<td headers="code_description" class="gt_row gt_left">Married Couple, own children only oldest child &gt;= 6, &lt;= 17</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">5</td>
<td headers="code_description" class="gt_row gt_left">All other Husband and wife families</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">5</td>
<td headers="code_description" class="gt_row gt_left">All other Husband and wife families</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">DIARY</td>
<td headers="code_value" class="gt_row gt_right">7</td>
<td headers="code_description" class="gt_row gt_left">One parent, female, own children, at least one age &lt; 18</td>
</tr>
<tr>
<td headers="survey" class="gt_row gt_left">INTERVIEW</td>
<td headers="code_value" class="gt_row gt_right">7</td>
<td headers="code_description" class="gt_row gt_left">One parent, female, own children, at least one age &lt; 18</td>
</tr>
</tbody>
</table>
</div>
<p>Now the codes are consistent across survey instruments and I can use
this code-book in my call to <code><a href="../reference/ce_prepdata.html">ce_prepdata()</a></code> using the
<code>own_code_book</code> argument.</p>
</div>
<div class="section level2">
<h2 id="calculating-ce-weighted-estimate-means-by-cu-composition">Calculating CE weighted estimate means by CU composition<a class="anchor" aria-label="anchor" href="#calculating-ce-weighted-estimate-means-by-cu-composition"></a>
</h2>
<p>Next I’ll load the integrated hierarchical grouping file for 2015 and
find the title for the utilities category.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">integ15_hg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ce_hg.html">ce_hg</a></span><span class="op">(</span></span>
<span>  <span class="fl">2015</span>,</span>
<span>  <span class="va">integrated</span>,</span>
<span>  hg_zip_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"stubs.zip"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">integ15_hg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span>, <span class="st">"utilities"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="vxwraymzch" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vxwraymzch table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vxwraymzch thead, #vxwraymzch tbody, #vxwraymzch tfoot, #vxwraymzch tr, #vxwraymzch td, #vxwraymzch th {
  border-style: none;
}

#vxwraymzch p {
  margin: 0;
  padding: 0;
}

#vxwraymzch .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vxwraymzch .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vxwraymzch .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vxwraymzch .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vxwraymzch .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vxwraymzch .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vxwraymzch .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vxwraymzch .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vxwraymzch .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vxwraymzch .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vxwraymzch .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vxwraymzch .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vxwraymzch .gt_spanner_row {
  border-bottom-style: hidden;
}

#vxwraymzch .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vxwraymzch .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vxwraymzch .gt_from_md > :first-child {
  margin-top: 0;
}

#vxwraymzch .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vxwraymzch .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vxwraymzch .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vxwraymzch .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vxwraymzch .gt_row_group_first td {
  border-top-width: 2px;
}

#vxwraymzch .gt_row_group_first th {
  border-top-width: 2px;
}

#vxwraymzch .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vxwraymzch .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vxwraymzch .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vxwraymzch .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vxwraymzch .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vxwraymzch .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vxwraymzch .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vxwraymzch .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vxwraymzch .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vxwraymzch .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vxwraymzch .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vxwraymzch .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vxwraymzch .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vxwraymzch .gt_left {
  text-align: left;
}

#vxwraymzch .gt_center {
  text-align: center;
}

#vxwraymzch .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vxwraymzch .gt_font_normal {
  font-weight: normal;
}

#vxwraymzch .gt_font_bold {
  font-weight: bold;
}

#vxwraymzch .gt_font_italic {
  font-style: italic;
}

#vxwraymzch .gt_super {
  font-size: 65%;
}

#vxwraymzch .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vxwraymzch .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vxwraymzch .gt_indent_1 {
  text-indent: 5px;
}

#vxwraymzch .gt_indent_2 {
  text-indent: 10px;
}

#vxwraymzch .gt_indent_3 {
  text-indent: 15px;
}

#vxwraymzch .gt_indent_4 {
  text-indent: 20px;
}

#vxwraymzch .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="level">level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="title">title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="ucc">ucc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="survey">survey</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="factor">factor</th>
    </tr></thead>
<tbody class="gt_table_body"><tr>
<td headers="level" class="gt_row gt_right">3</td>
<td headers="title" class="gt_row gt_left">Utilities, fuels, and public services</td>
<td headers="ucc" class="gt_row gt_left">UTILS</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr></tbody>
</table>
</div>
<p>The expenditure category associated with utilities is “Utilities,
fuels, and public services”. I’ll store that title to work with later
and narrow down the section of the stub file that includes only these
expenditures. I’ll use this title to filter out the UCC data from the
stub file that make up the utilities category to check which survey
these expenditures come from to calculate estimates.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">utilities_title</span> <span class="op">&lt;-</span> <span class="va">integ15_hg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span>, <span class="st">"utilities"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span></span>
<span></span>
<span><span class="va">utilities_hg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ce_uccs.html">ce_uccs</a></span><span class="op">(</span></span>
<span>  <span class="va">integ15_hg</span>,</span>
<span>  expenditure <span class="op">=</span> <span class="va">utilities_title</span>,</span>
<span>  uccs_only <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="va">utilities_hg</span><span class="op">)</span></span></code></pre></div>
<div id="fgiddogvmb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fgiddogvmb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fgiddogvmb thead, #fgiddogvmb tbody, #fgiddogvmb tfoot, #fgiddogvmb tr, #fgiddogvmb td, #fgiddogvmb th {
  border-style: none;
}

#fgiddogvmb p {
  margin: 0;
  padding: 0;
}

#fgiddogvmb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fgiddogvmb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fgiddogvmb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fgiddogvmb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fgiddogvmb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fgiddogvmb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgiddogvmb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fgiddogvmb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fgiddogvmb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fgiddogvmb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fgiddogvmb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fgiddogvmb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fgiddogvmb .gt_spanner_row {
  border-bottom-style: hidden;
}

#fgiddogvmb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fgiddogvmb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fgiddogvmb .gt_from_md > :first-child {
  margin-top: 0;
}

#fgiddogvmb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fgiddogvmb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fgiddogvmb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fgiddogvmb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fgiddogvmb .gt_row_group_first td {
  border-top-width: 2px;
}

#fgiddogvmb .gt_row_group_first th {
  border-top-width: 2px;
}

#fgiddogvmb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgiddogvmb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fgiddogvmb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fgiddogvmb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgiddogvmb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgiddogvmb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fgiddogvmb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fgiddogvmb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fgiddogvmb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgiddogvmb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fgiddogvmb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgiddogvmb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fgiddogvmb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgiddogvmb .gt_left {
  text-align: left;
}

#fgiddogvmb .gt_center {
  text-align: center;
}

#fgiddogvmb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fgiddogvmb .gt_font_normal {
  font-weight: normal;
}

#fgiddogvmb .gt_font_bold {
  font-weight: bold;
}

#fgiddogvmb .gt_font_italic {
  font-style: italic;
}

#fgiddogvmb .gt_super {
  font-size: 65%;
}

#fgiddogvmb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fgiddogvmb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fgiddogvmb .gt_indent_1 {
  text-indent: 5px;
}

#fgiddogvmb .gt_indent_2 {
  text-indent: 10px;
}

#fgiddogvmb .gt_indent_3 {
  text-indent: 15px;
}

#fgiddogvmb .gt_indent_4 {
  text-indent: 20px;
}

#fgiddogvmb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="level">level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="title">title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="ucc">ucc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="survey">survey</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="factor">factor</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="level" class="gt_row gt_right">3</td>
<td headers="title" class="gt_row gt_left">Utilities, fuels, and public services</td>
<td headers="ucc" class="gt_row gt_left">UTILS</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">4</td>
<td headers="title" class="gt_row gt_left">Natural gas</td>
<td headers="ucc" class="gt_row gt_left">NATRLG</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Utility-natural gas (renter)</td>
<td headers="ucc" class="gt_row gt_left">260211</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Utility-natural gas (owned home)</td>
<td headers="ucc" class="gt_row gt_left">260212</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Utility-natural gas (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">260213</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Utility-natural gas (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">260214</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">4</td>
<td headers="title" class="gt_row gt_left">Electricity</td>
<td headers="ucc" class="gt_row gt_left">ELECTR</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Electricity (renter)</td>
<td headers="ucc" class="gt_row gt_left">260111</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Electricity (owned home)</td>
<td headers="ucc" class="gt_row gt_left">260112</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Electricity (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">260113</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Electricity (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">260114</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">4</td>
<td headers="title" class="gt_row gt_left">Fuel oil and other fuels</td>
<td headers="ucc" class="gt_row gt_left">OTHRFU</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Fuel oil</td>
<td headers="ucc" class="gt_row gt_left">FUELOI</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Fuel oil (renter)</td>
<td headers="ucc" class="gt_row gt_left">250111</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Fuel oil (owned home)</td>
<td headers="ucc" class="gt_row gt_left">250112</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Fuel oil (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">250113</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Fuel oil (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">250114</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Coal, wood, and other fuels</td>
<td headers="ucc" class="gt_row gt_left">CLWDOT</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Coal, wood, other fuels (renter)</td>
<td headers="ucc" class="gt_row gt_left">250911</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Coal, wood, other fuels (owned home)</td>
<td headers="ucc" class="gt_row gt_left">250912</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Coal, wood, other fuels (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">250913</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Coal, wood, other fuels (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">250914</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Bottled gas</td>
<td headers="ucc" class="gt_row gt_left">BOTTLG</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Gas, btld/tank (renter)</td>
<td headers="ucc" class="gt_row gt_left">250211</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Gas, btld/tank (owned home)</td>
<td headers="ucc" class="gt_row gt_left">250212</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Gas, btld/tank (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">250213</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Gas, btld/tank (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">250214</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">4</td>
<td headers="title" class="gt_row gt_left">Telephone services</td>
<td headers="ucc" class="gt_row gt_left">PHONE</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Residential phone service, VOIP, and phone cards</td>
<td headers="ucc" class="gt_row gt_left">RESPHO</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Phone cards</td>
<td headers="ucc" class="gt_row gt_left">270104</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Residential telephone including VOIP</td>
<td headers="ucc" class="gt_row gt_left">270106</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Cellular phone service</td>
<td headers="ucc" class="gt_row gt_left">270102</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">4</td>
<td headers="title" class="gt_row gt_left">Water and other public services</td>
<td headers="ucc" class="gt_row gt_left">WATER</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Water and sewerage maintenance</td>
<td headers="ucc" class="gt_row gt_left">SEWER</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Water/sewer maint. (renter)</td>
<td headers="ucc" class="gt_row gt_left">270211</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Water/sewer maint. (owned home)</td>
<td headers="ucc" class="gt_row gt_left">270212</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Water/sewer maint. (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">270213</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Water/sewer maint. (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">270214</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Trash and garbage collection</td>
<td headers="ucc" class="gt_row gt_left">TRASH</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Trash/garb. coll. (renter)</td>
<td headers="ucc" class="gt_row gt_left">270411</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Trash/garb. coll. (owned home)</td>
<td headers="ucc" class="gt_row gt_left">270412</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Trash/garb. coll. (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">270413</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Trash/garb. coll. (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">270414</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">5</td>
<td headers="title" class="gt_row gt_left">Septic tank cleaning</td>
<td headers="ucc" class="gt_row gt_left">SEPTAN</td>
<td headers="survey" class="gt_row gt_left">G</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Septic tank clean. (renter)</td>
<td headers="ucc" class="gt_row gt_left">270901</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Septic tank clean. (owned home)</td>
<td headers="ucc" class="gt_row gt_left">270902</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Septic tank clean. (owned vacation)</td>
<td headers="ucc" class="gt_row gt_left">270903</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="level" class="gt_row gt_right">6</td>
<td headers="title" class="gt_row gt_left">Septic tank clean. (rented vacation)</td>
<td headers="ucc" class="gt_row gt_left">270904</td>
<td headers="survey" class="gt_row gt_left">I</td>
<td headers="factor" class="gt_row gt_right">1</td>
</tr>
</tbody>
</table>
</div>
<p>To check what survey instruments the expenditures are collected
through for published estimates I’ll check what surveys are listed in
the “survey” column of the hierarchical grouping data for utilities.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">utilities_hg</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">survey</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="plbjsyumxe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#plbjsyumxe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#plbjsyumxe thead, #plbjsyumxe tbody, #plbjsyumxe tfoot, #plbjsyumxe tr, #plbjsyumxe td, #plbjsyumxe th {
  border-style: none;
}

#plbjsyumxe p {
  margin: 0;
  padding: 0;
}

#plbjsyumxe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#plbjsyumxe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#plbjsyumxe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#plbjsyumxe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#plbjsyumxe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#plbjsyumxe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plbjsyumxe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#plbjsyumxe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#plbjsyumxe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#plbjsyumxe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#plbjsyumxe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#plbjsyumxe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#plbjsyumxe .gt_spanner_row {
  border-bottom-style: hidden;
}

#plbjsyumxe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#plbjsyumxe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#plbjsyumxe .gt_from_md > :first-child {
  margin-top: 0;
}

#plbjsyumxe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#plbjsyumxe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#plbjsyumxe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#plbjsyumxe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#plbjsyumxe .gt_row_group_first td {
  border-top-width: 2px;
}

#plbjsyumxe .gt_row_group_first th {
  border-top-width: 2px;
}

#plbjsyumxe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#plbjsyumxe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#plbjsyumxe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#plbjsyumxe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plbjsyumxe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#plbjsyumxe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#plbjsyumxe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#plbjsyumxe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#plbjsyumxe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#plbjsyumxe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#plbjsyumxe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#plbjsyumxe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#plbjsyumxe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#plbjsyumxe .gt_left {
  text-align: left;
}

#plbjsyumxe .gt_center {
  text-align: center;
}

#plbjsyumxe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#plbjsyumxe .gt_font_normal {
  font-weight: normal;
}

#plbjsyumxe .gt_font_bold {
  font-weight: bold;
}

#plbjsyumxe .gt_font_italic {
  font-style: italic;
}

#plbjsyumxe .gt_super {
  font-size: 65%;
}

#plbjsyumxe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#plbjsyumxe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#plbjsyumxe .gt_indent_1 {
  text-indent: 5px;
}

#plbjsyumxe .gt_indent_2 {
  text-indent: 10px;
}

#plbjsyumxe .gt_indent_3 {
  text-indent: 15px;
}

#plbjsyumxe .gt_indent_4 {
  text-indent: 20px;
}

#plbjsyumxe .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="survey">survey</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr><td headers="survey" class="gt_row gt_left">G</td></tr>
<tr><td headers="survey" class="gt_row gt_left">I</td></tr>
</tbody>
</table>
</div>
<p>It seems utilities expenditures are collected only through the
Interview survey (the “G” stands for “UCC group”), so I’ll only need to
use Interview data files to calculate estimates.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fam_type_utilities</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ce_prepdata.html">ce_prepdata</a></span><span class="op">(</span></span>
<span>  <span class="fl">2015</span>,</span>
<span>  <span class="va">interview</span>,</span>
<span>  <span class="va">utilities_hg</span>,</span>
<span>  uccs <span class="op">=</span> <span class="fu"><a href="../reference/ce_uccs.html">ce_uccs</a></span><span class="op">(</span><span class="va">utilities_hg</span>, expenditure <span class="op">=</span> <span class="va">utilities_title</span><span class="op">)</span>,</span>
<span>  <span class="va">fam_type</span>, </span>
<span>  int_zp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"intrvw15.zip"</span><span class="op">)</span>,</span>
<span>  recode_variables <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dict_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, <span class="st">"ce-data-dict.xlsx"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_nest.html" class="external-link">group_nest</a></span><span class="op">(</span><span class="va">fam_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ce_mean_df <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">ce_mean</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">data</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">ce_mean_df</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fam_type_utilities</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">fam_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="vchsteyseu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vchsteyseu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vchsteyseu thead, #vchsteyseu tbody, #vchsteyseu tfoot, #vchsteyseu tr, #vchsteyseu td, #vchsteyseu th {
  border-style: none;
}

#vchsteyseu p {
  margin: 0;
  padding: 0;
}

#vchsteyseu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vchsteyseu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vchsteyseu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vchsteyseu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vchsteyseu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vchsteyseu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vchsteyseu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vchsteyseu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vchsteyseu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vchsteyseu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vchsteyseu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vchsteyseu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vchsteyseu .gt_spanner_row {
  border-bottom-style: hidden;
}

#vchsteyseu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vchsteyseu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vchsteyseu .gt_from_md > :first-child {
  margin-top: 0;
}

#vchsteyseu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vchsteyseu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vchsteyseu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vchsteyseu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vchsteyseu .gt_row_group_first td {
  border-top-width: 2px;
}

#vchsteyseu .gt_row_group_first th {
  border-top-width: 2px;
}

#vchsteyseu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vchsteyseu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vchsteyseu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vchsteyseu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vchsteyseu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vchsteyseu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vchsteyseu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vchsteyseu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vchsteyseu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vchsteyseu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vchsteyseu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vchsteyseu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vchsteyseu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vchsteyseu .gt_left {
  text-align: left;
}

#vchsteyseu .gt_center {
  text-align: center;
}

#vchsteyseu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vchsteyseu .gt_font_normal {
  font-weight: normal;
}

#vchsteyseu .gt_font_bold {
  font-weight: bold;
}

#vchsteyseu .gt_font_italic {
  font-style: italic;
}

#vchsteyseu .gt_super {
  font-size: 65%;
}

#vchsteyseu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vchsteyseu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vchsteyseu .gt_indent_1 {
  text-indent: 5px;
}

#vchsteyseu .gt_indent_2 {
  text-indent: 10px;
}

#vchsteyseu .gt_indent_3 {
  text-indent: 15px;
}

#vchsteyseu .gt_indent_4 {
  text-indent: 20px;
}

#vchsteyseu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="fam_type">fam_type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="agg_exp">agg_exp</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean_exp">mean_exp</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="se">se</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="cv">cv</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="fam_type" class="gt_row gt_center">Married Couple only</td>
<td headers="agg_exp" class="gt_row gt_right">122623482952</td>
<td headers="mean_exp" class="gt_row gt_right">4378.377</td>
<td headers="se" class="gt_row gt_right">76.25699</td>
<td headers="cv" class="gt_row gt_right">1.741673</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">Married Couple, own children only, oldest child &lt; 6</td>
<td headers="agg_exp" class="gt_row gt_right">21592090354</td>
<td headers="mean_exp" class="gt_row gt_right">4073.529</td>
<td headers="se" class="gt_row gt_right">241.48233</td>
<td headers="cv" class="gt_row gt_right">5.928087</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">Married Couple, own children only oldest child &gt;= 6, &lt;= 17</td>
<td headers="agg_exp" class="gt_row gt_right">73899626502</td>
<td headers="mean_exp" class="gt_row gt_right">5136.781</td>
<td headers="se" class="gt_row gt_right">132.53306</td>
<td headers="cv" class="gt_row gt_right">2.580080</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">Married Couple, own children only, oldest child &gt; 17</td>
<td headers="agg_exp" class="gt_row gt_right">53687574363</td>
<td headers="mean_exp" class="gt_row gt_right">5585.027</td>
<td headers="se" class="gt_row gt_right">190.15164</td>
<td headers="cv" class="gt_row gt_right">3.404668</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">All other Husband and wife families</td>
<td headers="agg_exp" class="gt_row gt_right">26767356778</td>
<td headers="mean_exp" class="gt_row gt_right">5699.177</td>
<td headers="se" class="gt_row gt_right">331.83382</td>
<td headers="cv" class="gt_row gt_right">5.822487</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">One parent, male, own children at least one age &lt; 18</td>
<td headers="agg_exp" class="gt_row gt_right">4647315390</td>
<td headers="mean_exp" class="gt_row gt_right">3887.863</td>
<td headers="se" class="gt_row gt_right">532.21229</td>
<td headers="cv" class="gt_row gt_right">13.689069</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">One parent, female, own children, at least one age &lt; 18</td>
<td headers="agg_exp" class="gt_row gt_right">22862016917</td>
<td headers="mean_exp" class="gt_row gt_right">3684.480</td>
<td headers="se" class="gt_row gt_right">237.12762</td>
<td headers="cv" class="gt_row gt_right">6.435851</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">Single consumers</td>
<td headers="agg_exp" class="gt_row gt_right">88002147354</td>
<td headers="mean_exp" class="gt_row gt_right">2348.182</td>
<td headers="se" class="gt_row gt_right">40.59815</td>
<td headers="cv" class="gt_row gt_right">1.728919</td>
</tr>
<tr>
<td headers="fam_type" class="gt_row gt_center">Other families</td>
<td headers="agg_exp" class="gt_row gt_right">84986387660</td>
<td headers="mean_exp" class="gt_row gt_right">3942.345</td>
<td headers="se" class="gt_row gt_right">122.97865</td>
<td headers="cv" class="gt_row gt_right">3.119429</td>
</tr>
</tbody>
</table>
</div>
<p>And finally, a quick lollipop plot to visualize the data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fam_type_utilities</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fam_type <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">fam_type</span>, <span class="va">mean_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean_exp</span>, y <span class="op">=</span> <span class="va">fam_type</span>, <span class="va">mean_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>, xend <span class="op">=</span> <span class="va">mean_exp</span>, yend <span class="op">=</span> <span class="va">fam_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/dollar_format.html" class="external-link">dollar</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"CU composition (FAM_TYPE)"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Estimated, weighted, annual mean expenditure"</span>,</span>
<span>    title <span class="op">=</span></span>
<span>      <span class="st">"Estimated annual mean utilities expenditures by CU composition"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="inconsistent-code-definitions_files/figure-html/utilities-lollipop-1.png" width="768" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="clean-up">Clean-up<a class="anchor" aria-label="anchor" href="#clean-up"></a>
</h2>
<p>Finally, now that the analysis is done, I’ll delete the temporary
directory that contains all the CE data.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">ce_data_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Arcenis Rojas.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
